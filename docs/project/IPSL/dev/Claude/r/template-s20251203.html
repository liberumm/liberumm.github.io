<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>React 19 + MUI 7.3.5 - Single HTML with JSX (ESM)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Roboto（300 / 400 / 600 / 700） -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;600;700&display=swap" />

    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>

  </head>
  <body>
    <div id="root"></div>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="module">
      import React from "https://esm.sh/react@19.2.0";
      import { createRoot } from "https://esm.sh/react-dom@19.2.0/client";
      import * as MaterialUI from "https://esm.sh/@mui/material@7.3.5?deps=react@19.2.0,react-dom@19.2.0";

      const appCode = `
        const { useState } = React;
        const rootElement = document.getElementById("root");

        const {
          ThemeProvider,
          createTheme,
          CssBaseline,
          Container,
          Box,
          Stack,
          TextField,
          Button,
          Typography,
        } = MaterialUI;

        const theme = createTheme({
          palette: {
            mode: "light",
            primary: { main: "#1976d2" },
          },
          typography: {
            fontFamily: '"Roboto", "Helvetica", "Arial", sans-serif',
          },
        });

        function App() {
          const [value, setValue] = useState("");

          return (
            <ThemeProvider theme={theme}>
              <CssBaseline />
              <Container maxWidth="sm">
                <Box sx={{ mt: 4 }}>
                  <Typography variant="h4" gutterBottom>
                    React 19 + MUI 7.3.5 + JSX（HTML 1 ファイル）
                  </Typography>
                  <Typography variant="body2" color="text.secondary">
                    React/MUI は ESM、JSX は Babel Standalone で変換しています。
                  </Typography>
                  <Stack spacing={2} sx={{ mt: 3 }}>
                    <TextField
                      label="入力"
                      value={value}
                      onChange={(e) => setValue(e.target.value)}
                      fullWidth
                    />
                    <Button
                      variant="contained"
                      onClick={() => alert('入力値: ' + value)}
                    >
                      送信
                    </Button>
                  </Stack>
                </Box>
              </Container>
            </ThemeProvider>
          );
        }

        const root = createRoot(rootElement);
        root.render(
          <React.StrictMode>
            <App />
          </React.StrictMode>
        );
      `;

      const { code } = Babel.transform(appCode, {
        presets: ["react"],
      });

      const runApp = new Function("React", "createRoot", "MaterialUI", code);
      runApp(React, createRoot, MaterialUI);
    </script>
  </body>
</html>

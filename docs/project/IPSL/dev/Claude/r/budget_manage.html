<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>予実ダッシュボード</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mui/material@5.11.15/umd/material-ui.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.0/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emotion/react@11.11.0/dist/emotion-react.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emotion/styled@11.11.0/dist/emotion-styled.umd.min.js"></script>
  <style>
    body { background:#f4f6fa; margin:0; }
    .tab-title{ display:flex; align-items:center; gap:8px; font-weight:500; }
    /* レスポンシブ対応 */
    @media (max-width: 900px) {
      .MuiContainer-root {
        padding-left: 8px !important;
        padding-right: 8px !important;
      }
      .MuiCardContent-root {
        padding: 12px !important;
      }
      .MuiTableCell-root {
        padding: 6px 8px !important;
        font-size: 0.95rem;
      }
    }
    @media (max-width: 600px) {
      .MuiTabs-root {
        font-size: 0.9rem;
      }
      .MuiTableCell-root {
        font-size: 0.85rem;
      }
      .MuiTypography-h5 {
        font-size: 1.2rem !important;
      }
      .MuiTypography-h6 {
        font-size: 1rem !important;
      }
    }
    /* テーブル横スクロール */
    .MuiTableContainer-root {
      overflow-x: auto;
    }
  </style>
</head>
<body style="margin:0;padding:0;">
<div id="root"></div>

<!-- 各タブのJSを読み込み -->
<script type="text/babel" src="components\budget-view.js"></script>
<script type="text/babel" src="components\budget-site.js"></script>
<script type="text/babel" src="components\budget-task.js"></script>
<script type="text/babel" src="components\budget-budget.js"></script>
<script type="text/babel" src="components\budget-list.js"></script>
<script type="text/babel" src="components\budget-estimate.js"></script>
<script type="text/babel" src="components\budget-invoice.js"></script>
<script type="text/babel" src="components\budget-payment.js"></script>

<script type="text/babel">
const { useState } = React;
const {
  AppBar, Tabs, Tab, Box, CssBaseline, ThemeProvider, createTheme
} = MaterialUI;

function TabPanel({ value, index, children }) {
  return (
    <div hidden={value !== index} style={{ padding: value === index ? 16 : 0 }}>
      {value === index && <Box>{children}</Box>}
    </div>
  );
}

function App() {
  const [tab, setTab] = useState(0);
  return (
    <Box sx={{ minHeight: '100vh', pb: 2, width: '100vw', maxWidth: '100vw', px: { xs: 0, md: 0 } }}>
      <AppBar position="static" color="default" elevation={3} sx={{ borderRadius: { xs: 0, md: '0 0 16px 16px' }, mb: 2 }}>
        <Tabs value={tab} onChange={(_, v) => setTab(v)} variant="scrollable"
          textColor="primary" indicatorColor="primary"
          sx={{
            minHeight: 48,
            '.MuiTab-root': { minHeight: 48, fontWeight: 500, fontSize: { xs: '0.9rem', md: '1rem' } }
          }}>
          <Tab icon={<span className="material-icons">dashboard</span>} label="予実一覧" />
          <Tab icon={<span className="material-icons">list_alt</span>} label="予算一覧" />
          <Tab icon={<span className="material-icons">folder</span>} label="案件一覧" />
          <Tab icon={<span className="material-icons">assignment</span>} label="作業一覧" />
          <Tab icon={<span className="material-icons">request_quote</span>} label="見積一覧" />
          <Tab icon={<span className="material-icons">receipt</span>} label="請求一覧" />
          <Tab icon={<span className="material-icons">payment</span>} label="支払一覧" />
        </Tabs>
      </AppBar>
      <TabPanel value={tab} index={0}><BudgetView /></TabPanel>
      <TabPanel value={tab} index={1}><BudgetList /></TabPanel>
      <TabPanel value={tab} index={2}><ProjectTab /></TabPanel>
      <TabPanel value={tab} index={3}><TaskTab /></TabPanel>
      <TabPanel value={tab} index={4}><EstimateTab /></TabPanel>
      <TabPanel value={tab} index={5}><InvoiceTab /></TabPanel>
      <TabPanel value={tab} index={6}><PaymentTab /></TabPanel>
    </Box>
  );
}

const theme = createTheme({
  palette: { primary: { main: '#1976d2' }, secondary: { main: '#9c27b0' } },
  typography: { fontFamily: 'Roboto, sans-serif' }
});

ReactDOM.createRoot(document.getElementById("root")).render(
  <ThemeProvider theme={theme}>
    <CssBaseline />
    <Box sx={{ width: '100vw', maxWidth: '100vw', px: 0 }}>
      <App />
    </Box>
  </ThemeProvider>
);
</script>
</body>
</html>

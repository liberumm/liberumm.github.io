<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>AIチャットボット管理 — Console</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <style>
      html, body, #root {
        height: 100%;
        margin: 0;
        background: #f5f7fa;
        font-family: "Roboto", sans-serif;
      }
      .material-icons { vertical-align: middle; }
      *:focus-visible {
        outline: 2px solid #1976d2;
        outline-offset: 2px;
      }
      .status-chip {
        display: inline-flex;
        align-items: center;
        padding: 4px 12px;
        border-radius: 16px;
        font-size: 12px;
        font-weight: 500;
      }
      .status-active { background: #e8f5e9; color: #2e7d32; }
      .status-draft { background: #fff3e0; color: #e65100; }
      .status-archived { background: #f5f5f5; color: #616161; }
      .empty-state {
        text-align: center;
        padding: 48px 24px;
        color: #9e9e9e;
      }
      .chat-message {
        padding: 12px 16px;
        border-radius: 12px;
        margin-bottom: 8px;
      }
      .chat-user { background: #e3f2fd; margin-left: 20%; }
      .chat-bot { background: #f5f5f5; margin-right: 20%; }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="module">
      import React from "https://esm.sh/react@19.2.0";
      import { createRoot } from "https://esm.sh/react-dom@19.2.0/client";
      import * as MaterialUI from "https://esm.sh/@mui/material@7.3.5?deps=react@19.2.0,react-dom@19.2.0";
      import * as MaterialIcons from "https://esm.sh/@mui/icons-material@7.3.5?deps=react@19.2.0,react-dom@19.2.0";

      const appCode = `
        const { useState, useEffect, useMemo } = React;
        const {
          ThemeProvider, createTheme, CssBaseline, useMediaQuery,
          Container, Box, Stack, AppBar, Toolbar, Typography, Paper,
          Divider, Button, IconButton, Tabs, Tab, TextField, List,
          ListItemText, ListItemButton, ListItemAvatar, Avatar, Grid,
          Slider, Select, MenuItem, FormControl, InputLabel, Chip,
          Card, CardContent, CardActions, Dialog, DialogTitle,
          DialogContent, DialogActions, Alert
        } = MaterialUI;
        const { Send, Chat, SmartToy, Settings, Dashboard, Add, Delete, CheckCircle } = MaterialIcons;

        const LS = {
          load: (key, fallback) => {
            try {
              const raw = localStorage.getItem(key);
              return raw ? JSON.parse(raw) : fallback;
            } catch { return fallback; }
          },
          save: (key, value) => {
            try { localStorage.setItem(key, JSON.stringify(value)); } catch {}
          }
        };

        const uid = (prefix = "id") => prefix + "_" + Math.random().toString(36).slice(2, 9);

        const defaultAgents = () => [
          {
            id: uid("agent"),
            name: "FAQエージェント",
            description: "よくある質問に回答",
            model: "gpt-4.1-mini",
            temperature: 0.2,
            systemPrompt: "あなたはFAQ専用のアシスタントです。"
          },
          {
            id: uid("agent"),
            name: "トリアージエージェント",
            description: "問い合わせを振り分け",
            model: "gpt-4o-mini",
            temperature: 0.1,
            systemPrompt: "ユーザーの意図を分類します。"
          }
        ];

        const defaultBots = (agents) => [{
          id: uid("bot"),
          name: "Webサイト用FAQボット",
          description: "コーポレートサイトの問い合わせ窓口",
          status: "draft",
          channel: "web",
          entryMessage: "こんにちは。ご質問をどうぞ。",
          primaryAgentId: agents[0]?.id || null
        }];

        function StatusBadge({ status }) {
          const labels = { draft: "下書き", active: "有効", archived: "アーカイブ" };
          return <span className={\`status-chip status-\${status}\`}>{labels[status] || status}</span>;
        }

        function MessageDialog({ open, onClose, title = "メッセージ", message = "" }) {
          return (
            <Dialog open={open} onClose={onClose} maxWidth="xs" fullWidth>
              <DialogTitle>{title}</DialogTitle>
              <DialogContent><Typography>{message}</Typography></DialogContent>
              <DialogActions><Button onClick={onClose}>OK</Button></DialogActions>
            </Dialog>
          );
        }

        function BotsSection({ bots, setBots, agents, notify }) {
          const [selectedId, setSelectedId] = useState(bots[0]?.id || null);
          const [chatInput, setChatInput] = useState("");
          const [messages, setMessages] = useState([]);

          useEffect(() => {
            if (!selectedId && bots[0]) setSelectedId(bots[0].id);
          }, [bots, selectedId]);

          const currentBot = useMemo(() => 
            bots.find(b => b.id === selectedId) || null, [bots, selectedId]
          );

          const updateBot = (patch) => {
            if (!currentBot) return;
            setBots(prev => prev.map(b => b.id === currentBot.id ? { ...b, ...patch } : b));
          };

          const handleAdd = () => {
            const bot = {
              id: uid("bot"),
              name: "新規チャットボット",
              description: "",
              status: "draft",
              channel: "web",
              entryMessage: "こんにちは。",
              primaryAgentId: agents[0]?.id || null
            };
            setBots(prev => [...prev, bot]);
            setSelectedId(bot.id);
            notify("ボットを追加しました");
          };

          const handleDelete = (id) => {
            if (!confirm("削除しますか？")) return;
            setBots(prev => prev.filter(b => b.id !== id));
            const remain = bots.filter(b => b.id !== id);
            setSelectedId(remain[0]?.id || null);
            notify("ボットを削除しました");
          };

          const handleSend = () => {
            if (!currentBot || !chatInput.trim()) return;
            const q = chatInput.trim();
            const agent = agents.find(a => a.id === currentBot.primaryAgentId) || agents[0];
            const userMsg = { from: "user", text: q, id: uid("msg") };
            const botMsg = {
              from: "bot",
              text: \`[デモ応答] ボット「\${currentBot.name}」→エージェント「\${agent?.name || "未設定"}」\\n\\n質問: \${q}\\n→ 実際のLLM応答がここに表示されます。\`,
              id: uid("msg")
            };
            setMessages(prev => [...prev, userMsg, botMsg]);
            setChatInput("");
          };

          return (
            <Paper sx={{ borderRadius: 2, overflow: "hidden" }}>
              <Box p={3} bgcolor="primary.main" color="white">
                <Typography variant="h5" fontWeight={600}>
                  <Chat sx={{ mr: 1, verticalAlign: "middle" }} />
                  チャットボット管理
                </Typography>
              </Box>
              <Box p={3}>
                <Grid container spacing={3}>
                  <Grid item xs={12} md={4}>
                    <Button
                      variant="contained"
                      fullWidth
                      startIcon={<Add />}
                      onClick={handleAdd}
                      sx={{ mb: 2 }}
                    >
                      新規ボット
                    </Button>
                    {bots.length === 0 ? (
                      <div className="empty-state">
                        <SmartToy sx={{ fontSize: 48, mb: 1 }} />
                        <Typography>ボットがありません</Typography>
                      </div>
                    ) : (
                      <List>
                        {bots.map(bot => (
                          <ListItemButton
                            key={bot.id}
                            selected={bot.id === selectedId}
                            onClick={() => setSelectedId(bot.id)}
                            sx={{ borderRadius: 2, mb: 1 }}
                          >
                            <ListItemAvatar>
                              <Avatar sx={{ bgcolor: "primary.main" }}>
                                {bot.name.slice(0, 2)}
                              </Avatar>
                            </ListItemAvatar>
                            <ListItemText
                              primary={bot.name}
                              secondary={<StatusBadge status={bot.status} />}
                            />
                            <IconButton
                              size="small"
                              onClick={(e) => { e.stopPropagation(); handleDelete(bot.id); }}
                            >
                              <Delete fontSize="small" />
                            </IconButton>
                          </ListItemButton>
                        ))}
                      </List>
                    )}
                  </Grid>

                  <Grid item xs={12} md={8}>
                    {currentBot ? (
                      <Stack spacing={3}>
                        <Card variant="outlined">
                          <CardContent>
                            <Typography variant="h6" gutterBottom>基本設定</Typography>
                            <Grid container spacing={2}>
                              <Grid item xs={12} sm={6}>
                                <TextField
                                  label="ボット名"
                                  fullWidth
                                  value={currentBot.name}
                                  onChange={(e) => updateBot({ name: e.target.value })}
                                />
                              </Grid>
                              <Grid item xs={12} sm={6}>
                                <FormControl fullWidth>
                                  <InputLabel>ステータス</InputLabel>
                                  <Select
                                    label="ステータス"
                                    value={currentBot.status}
                                    onChange={(e) => updateBot({ status: e.target.value })}
                                  >
                                    <MenuItem value="draft">下書き</MenuItem>
                                    <MenuItem value="active">有効</MenuItem>
                                    <MenuItem value="archived">アーカイブ</MenuItem>
                                  </Select>
                                </FormControl>
                              </Grid>
                              <Grid item xs={12} sm={6}>
                                <FormControl fullWidth>
                                  <InputLabel>チャネル</InputLabel>
                                  <Select
                                    label="チャネル"
                                    value={currentBot.channel}
                                    onChange={(e) => updateBot({ channel: e.target.value })}
                                  >
                                    <MenuItem value="web">Webチャット</MenuItem>
                                    <MenuItem value="in-app">アプリ内</MenuItem>
                                    <MenuItem value="slack">Slack</MenuItem>
                                    <MenuItem value="line">LINE</MenuItem>
                                  </Select>
                                </FormControl>
                              </Grid>
                              <Grid item xs={12} sm={6}>
                                <FormControl fullWidth>
                                  <InputLabel>メインエージェント</InputLabel>
                                  <Select
                                    label="メインエージェント"
                                    value={currentBot.primaryAgentId || ""}
                                    onChange={(e) => updateBot({ primaryAgentId: e.target.value })}
                                  >
                                    {agents.map(a => (
                                      <MenuItem key={a.id} value={a.id}>{a.name}</MenuItem>
                                    ))}
                                  </Select>
                                </FormControl>
                              </Grid>
                              <Grid item xs={12}>
                                <TextField
                                  label="説明"
                                  fullWidth
                                  multiline
                                  rows={2}
                                  value={currentBot.description}
                                  onChange={(e) => updateBot({ description: e.target.value })}
                                />
                              </Grid>
                              <Grid item xs={12}>
                                <TextField
                                  label="初回メッセージ"
                                  fullWidth
                                  multiline
                                  rows={2}
                                  value={currentBot.entryMessage}
                                  onChange={(e) => updateBot({ entryMessage: e.target.value })}
                                />
                              </Grid>
                            </Grid>
                          </CardContent>
                        </Card>

                        <Card variant="outlined">
                          <CardContent>
                            <Typography variant="h6" gutterBottom>
                              <Chat sx={{ mr: 1, fontSize: 20 }} />
                              テストチャット
                            </Typography>
                            <Box sx={{ maxHeight: 300, overflow: "auto", mb: 2 }}>
                              {messages.length === 0 ? (
                                <Alert severity="info">メッセージを送信してテストできます</Alert>
                              ) : (
                                messages.map(m => (
                                  <div key={m.id} className={\`chat-message chat-\${m.from}\`}>
                                    <Typography variant="caption" color="text.secondary">
                                      {m.from === "user" ? "ユーザー" : "ボット"}
                                    </Typography>
                                    <Typography variant="body2" sx={{ whiteSpace: "pre-wrap" }}>
                                      {m.text}
                                    </Typography>
                                  </div>
                                ))
                              )}
                            </Box>
                            <Stack direction="row" spacing={1}>
                              <TextField
                                placeholder="メッセージを入力..."
                                fullWidth
                                value={chatInput}
                                onChange={(e) => setChatInput(e.target.value)}
                                onKeyDown={(e) => {
                                  if (e.key === "Enter" && !e.shiftKey) {
                                    e.preventDefault();
                                    handleSend();
                                  }
                                }}
                              />
                              <Button
                                variant="contained"
                                onClick={handleSend}
                                disabled={!chatInput.trim()}
                              >
                                <Send />
                              </Button>
                            </Stack>
                          </CardContent>
                        </Card>
                      </Stack>
                    ) : (
                      <div className="empty-state">
                        <Typography>ボットを選択してください</Typography>
                      </div>
                    )}
                  </Grid>
                </Grid>
              </Box>
            </Paper>
          );
        }

        function AgentsSection({ agents, setAgents, notify }) {
          const [selectedId, setSelectedId] = useState(agents[0]?.id || null);
          const [chatInput, setChatInput] = useState("");
          const [messages, setMessages] = useState([]);

          useEffect(() => {
            if (!selectedId && agents[0]) setSelectedId(agents[0].id);
          }, [agents, selectedId]);

          const currentAgent = useMemo(() =>
            agents.find(a => a.id === selectedId) || null, [agents, selectedId]
          );

          const updateAgent = (patch) => {
            if (!currentAgent) return;
            setAgents(prev => prev.map(a => a.id === currentAgent.id ? { ...a, ...patch } : a));
          };

          const handleAdd = () => {
            const agent = {
              id: uid("agent"),
              name: "新規エージェント",
              description: "",
              model: "gpt-4.1-mini",
              temperature: 0.3,
              systemPrompt: "あなたは親切なアシスタントです。"
            };
            setAgents(prev => [...prev, agent]);
            setSelectedId(agent.id);
            notify("エージェントを追加しました");
          };

          const handleDelete = (id) => {
            if (!confirm("削除しますか？")) return;
            setAgents(prev => prev.filter(a => a.id !== id));
            const remain = agents.filter(a => a.id !== id);
            setSelectedId(remain[0]?.id || null);
            notify("エージェントを削除しました");
          };

          const handleSend = () => {
            if (!currentAgent || !chatInput.trim()) return;
            const q = chatInput.trim();
            const userMsg = { from: "user", text: q, id: uid("msg") };
            const agentMsg = {
              from: "agent",
              text: \`[デモ応答] エージェント「\${currentAgent.name}」(モデル: \${currentAgent.model})\\n\\n質問: \${q}\\n→ 実際のLLM応答がここに表示されます。\`,
              id: uid("msg")
            };
            setMessages(prev => [...prev, userMsg, agentMsg]);
            setChatInput("");
          };

          return (
            <Paper sx={{ borderRadius: 2, overflow: "hidden" }}>
              <Box p={3} bgcolor="secondary.main" color="white">
                <Typography variant="h5" fontWeight={600}>
                  <SmartToy sx={{ mr: 1, verticalAlign: "middle" }} />
                  エージェント管理
                </Typography>
              </Box>
              <Box p={3}>
                <Grid container spacing={3}>
                  <Grid item xs={12} md={4}>
                    <Button
                      variant="contained"
                      fullWidth
                      startIcon={<Add />}
                      onClick={handleAdd}
                      sx={{ mb: 2 }}
                    >
                      新規エージェント
                    </Button>
                    {agents.length === 0 ? (
                      <div className="empty-state">
                        <SmartToy sx={{ fontSize: 48, mb: 1 }} />
                        <Typography>エージェントがありません</Typography>
                      </div>
                    ) : (
                      <List>
                        {agents.map(agent => (
                          <ListItemButton
                            key={agent.id}
                            selected={agent.id === selectedId}
                            onClick={() => setSelectedId(agent.id)}
                            sx={{ borderRadius: 2, mb: 1 }}
                          >
                            <ListItemAvatar>
                              <Avatar sx={{ bgcolor: "secondary.main" }}>
                                {agent.name.slice(0, 2)}
                              </Avatar>
                            </ListItemAvatar>
                            <ListItemText
                              primary={agent.name}
                              secondary={agent.model}
                            />
                            <IconButton
                              size="small"
                              onClick={(e) => { e.stopPropagation(); handleDelete(agent.id); }}
                            >
                              <Delete fontSize="small" />
                            </IconButton>
                          </ListItemButton>
                        ))}
                      </List>
                    )}
                  </Grid>

                  <Grid item xs={12} md={8}>
                    {currentAgent ? (
                      <Stack spacing={3}>
                        <Card variant="outlined">
                          <CardContent>
                            <Typography variant="h6" gutterBottom>基本設定</Typography>
                            <Grid container spacing={2}>
                              <Grid item xs={12} sm={6}>
                                <TextField
                                  label="エージェント名"
                                  fullWidth
                                  value={currentAgent.name}
                                  onChange={(e) => updateAgent({ name: e.target.value })}
                                />
                              </Grid>
                              <Grid item xs={12} sm={6}>
                                <FormControl fullWidth>
                                  <InputLabel>モデル</InputLabel>
                                  <Select
                                    label="モデル"
                                    value={currentAgent.model}
                                    onChange={(e) => updateAgent({ model: e.target.value })}
                                  >
                                    <MenuItem value="gpt-4.1-mini">gpt-4.1-mini</MenuItem>
                                    <MenuItem value="gpt-4o-mini">gpt-4o-mini</MenuItem>
                                    <MenuItem value="gpt-4.1">gpt-4.1</MenuItem>
                                    <MenuItem value="local-llm">ローカルLLM</MenuItem>
                                  </Select>
                                </FormControl>
                              </Grid>
                              <Grid item xs={12}>
                                <Typography gutterBottom>
                                  温度: {currentAgent.temperature}
                                </Typography>
                                <Slider
                                  min={0}
                                  max={1}
                                  step={0.05}
                                  value={currentAgent.temperature}
                                  onChange={(_, v) => updateAgent({ temperature: v })}
                                  valueLabelDisplay="auto"
                                />
                              </Grid>
                              <Grid item xs={12}>
                                <TextField
                                  label="説明"
                                  fullWidth
                                  multiline
                                  rows={2}
                                  value={currentAgent.description}
                                  onChange={(e) => updateAgent({ description: e.target.value })}
                                />
                              </Grid>
                              <Grid item xs={12}>
                                <TextField
                                  label="システムプロンプト"
                                  fullWidth
                                  multiline
                                  rows={3}
                                  value={currentAgent.systemPrompt}
                                  onChange={(e) => updateAgent({ systemPrompt: e.target.value })}
                                />
                              </Grid>
                            </Grid>
                          </CardContent>
                        </Card>

                        <Card variant="outlined">
                          <CardContent>
                            <Typography variant="h6" gutterBottom>
                              <SmartToy sx={{ mr: 1, fontSize: 20 }} />
                              テストメッセージ
                            </Typography>
                            <Box sx={{ maxHeight: 300, overflow: "auto", mb: 2 }}>
                              {messages.length === 0 ? (
                                <Alert severity="info">メッセージを送信してテストできます</Alert>
                              ) : (
                                messages.map(m => (
                                  <div key={m.id} className={\`chat-message chat-\${m.from}\`}>
                                    <Typography variant="caption" color="text.secondary">
                                      {m.from === "user" ? "ユーザー" : "エージェント"}
                                    </Typography>
                                    <Typography variant="body2" sx={{ whiteSpace: "pre-wrap" }}>
                                      {m.text}
                                    </Typography>
                                  </div>
                                ))
                              )}
                            </Box>
                            <Stack direction="row" spacing={1}>
                              <TextField
                                placeholder="メッセージを入力..."
                                fullWidth
                                value={chatInput}
                                onChange={(e) => setChatInput(e.target.value)}
                                onKeyDown={(e) => {
                                  if (e.key === "Enter" && !e.shiftKey) {
                                    e.preventDefault();
                                    handleSend();
                                  }
                                }}
                              />
                              <Button
                                variant="contained"
                                onClick={handleSend}
                                disabled={!chatInput.trim()}
                              >
                                <Send />
                              </Button>
                            </Stack>
                          </CardContent>
                        </Card>
                      </Stack>
                    ) : (
                      <div className="empty-state">
                        <Typography>エージェントを選択してください</Typography>
                      </div>
                    )}
                  </Grid>
                </Grid>
              </Box>
            </Paper>
          );
        }

        function OverviewSection({ bots, agents }) {
          const activeBots = bots.filter(b => b.status === "active").length;

          return (
            <Stack spacing={3}>
              <Paper sx={{ p: 3, borderRadius: 2 }}>
                <Typography variant="h5" fontWeight={600} gutterBottom>
                  <Dashboard sx={{ mr: 1, verticalAlign: "middle" }} />
                  システム概要
                </Typography>
                <Grid container spacing={3} sx={{ mt: 1 }}>
                  <Grid item xs={12} sm={4}>
                    <Card sx={{ bgcolor: "primary.light", color: "white" }}>
                      <CardContent>
                        <Typography variant="h3" fontWeight={700}>{bots.length}</Typography>
                        <Typography variant="body1">ボット数</Typography>
                        <Typography variant="caption">有効: {activeBots}</Typography>
                      </CardContent>
                    </Card>
                  </Grid>
                  <Grid item xs={12} sm={4}>
                    <Card sx={{ bgcolor: "secondary.light", color: "white" }}>
                      <CardContent>
                        <Typography variant="h3" fontWeight={700}>{agents.length}</Typography>
                        <Typography variant="body1">エージェント数</Typography>
                        <Typography variant="caption">設定済み</Typography>
                      </CardContent>
                    </Card>
                  </Grid>
                  <Grid item xs={12} sm={4}>
                    <Card sx={{ bgcolor: "success.light", color: "white" }}>
                      <CardContent>
                        <Typography variant="h3" fontWeight={700}>
                          <CheckCircle sx={{ fontSize: 48 }} />
                        </Typography>
                        <Typography variant="body1">接続状態</Typography>
                        <Typography variant="caption">正常</Typography>
                      </CardContent>
                    </Card>
                  </Grid>
                </Grid>
              </Paper>

              <Alert severity="info">
                <Typography variant="body2">
                  このデモはローカルストレージを使用しています。実際のLLM接続は含まれていません。
                </Typography>
              </Alert>
            </Stack>
          );
        }

        function App() {
          const prefersDark = useMediaQuery("(prefers-color-scheme: dark)");
          const [agents, setAgents] = useState(() => LS.load("demo-agents", defaultAgents()));
          const [bots, setBots] = useState(() => LS.load("demo-bots", defaultBots(defaultAgents())));
          const [msg, setMsg] = useState({ open: false, title: "", message: "" });
          const [tab, setTab] = useState(0);

          const notify = (message) => setMsg({ open: true, title: "通知", message });

          useEffect(() => LS.save("demo-agents", agents), [agents]);
          useEffect(() => LS.save("demo-bots", bots), [bots]);

          const theme = useMemo(() => createTheme({
            palette: {
              mode: prefersDark ? "dark" : "light",
              primary: { main: "#1976d2" },
              secondary: { main: "#9c27b0" }
            },
            shape: { borderRadius: 8 },
            components: {
              MuiButton: { styleOverrides: { root: { textTransform: "none" } } }
            }
          }), [prefersDark]);

          const handleReset = () => {
            if (!confirm("初期化しますか？")) return;
            const baseAgents = defaultAgents();
            setAgents(baseAgents);
            setBots(defaultBots(baseAgents));
            notify("初期化しました");
          };

          return (
            <ThemeProvider theme={theme}>
              <CssBaseline />
              <AppBar position="sticky" color="inherit" elevation={1}>
                <Toolbar>
                  <Typography variant="h6" sx={{ flexGrow: 1, fontWeight: 600 }}>
                    AIチャットボット管理
                  </Typography>
                  <IconButton onClick={handleReset} title="初期化">
                    <span className="material-icons">restart_alt</span>
                  </IconButton>
                </Toolbar>
                <Tabs
                  value={tab}
                  onChange={(_, v) => setTab(v)}
                  variant="scrollable"
                  textColor="primary"
                  indicatorColor="primary"
                >
                  <Tab icon={<Dashboard />} iconPosition="start" label="概要" />
                  <Tab icon={<Chat />} iconPosition="start" label="ボット" />
                  <Tab icon={<SmartToy />} iconPosition="start" label="エージェント" />
                </Tabs>
              </AppBar>

              <Container maxWidth="xl" sx={{ py: 4 }}>
                {tab === 0 && <OverviewSection bots={bots} agents={agents} />}
                {tab === 1 && <BotsSection bots={bots} setBots={setBots} agents={agents} notify={notify} />}
                {tab === 2 && <AgentsSection agents={agents} setAgents={setAgents} notify={notify} />}
              </Container>

              <MessageDialog
                open={msg.open}
                title={msg.title}
                message={msg.message}
                onClose={() => setMsg(prev => ({ ...prev, open: false }))}
              />
            </ThemeProvider>
          );
        }

        const root = createRoot(document.getElementById("root"));
        root.render(<React.StrictMode><App /></React.StrictMode>);
      `;

      const { code } = Babel.transform(appCode, { presets: ["react"] });
      const runApp = new Function("React", "createRoot", "MaterialUI", "MaterialIcons", code);
      runApp(React, createRoot, MaterialUI, MaterialIcons);
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Stickyヘッダー + 上部スクロールバー</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
    }

    /* 上部スクロールバー領域 */
    .scrollbar-top {
      width: 100%;
      overflow-x: auto;
      overflow-y: hidden;
      height: 16px;
      position: sticky;
      top: 0;
      background: #f9f9f9;
      z-index: 20;
    }

    .scrollbar-top-inner {
      height: 1px;
    }

    /* 表全体をスクロール可能にするラッパー */
    .table-wrapper {
      overflow-x: auto;
      max-height: 400px; /* 表本体の縦スクロールも可能に */
    }

    table {
      border-collapse: collapse;
      width: max-content;  /* 内容に応じて横幅を広げる */
      min-width: 100%;     /* 親要素より狭くならない */
    }

    th, td {
      padding: 8px;
      border: 1px solid #ccc;
      white-space: nowrap;
      text-align: left;
      background: #fff;
    }

    thead th {
      position: sticky;
      top: 16px; /* スクロールバーの高さ分 */
      background: #fff;
      z-index: 10;
    }

    /* スマホ対応 */
    @media (max-width: 768px) {
      th, td {
        font-size: 14px;
        padding: 6px;
      }
    }
  </style>
</head>
<body>

  <!-- 上部横スクロールバー -->
  <div class="scrollbar-top" id="fake-scroll">
    <div class="scrollbar-top-inner" id="scrollbar-inner"></div>
  </div>

  <!-- 表のスクロール可能領域 -->
  <div class="table-wrapper" id="real-scroll">
    <table id="content-table">
      <thead>
        <tr>
          <th>項目1</th>
          <th>項目2</th>
          <th>項目3</th>
          <th>項目4</th>
          <th>項目5</th>
          <th>項目6</th>
          <th>項目7</th>
        </tr>
      </thead>
      <tbody>
        <!-- デモデータ（複数行） -->
        <tr>
          <td>データA1</td><td>データA2</td><td>データA3</td><td>データA4</td><td>データA5</td><td>データA6</td><td>データA7</td>
        </tr>
        <tr>
          <td>データB1</td><td>データB2</td><td>データB3</td><td>データB4</td><td>データB5</td><td>データB6</td><td>データB7</td>
        </tr>
        <tr>
          <td>データC1</td><td>データC2</td><td>データC3</td><td>データC4</td><td>データC5</td><td>データC6</td><td>データC7</td>
        </tr>
        <!-- 必要に応じて行追加 -->
      </tbody>
    </table>
  </div>

  <script>
    const fakeScroll = document.getElementById('fake-scroll');
    const realScroll = document.getElementById('real-scroll');
    const inner = document.getElementById('scrollbar-inner');
    const contentTable = document.getElementById('content-table');

    // 横スクロールを同期
    fakeScroll.addEventListener('scroll', () => {
      realScroll.scrollLeft = fakeScroll.scrollLeft;
    });

    realScroll.addEventListener('scroll', () => {
      fakeScroll.scrollLeft = realScroll.scrollLeft;
    });

    // スクロール幅の同期調整
    function syncWidth() {
      inner.style.width = contentTable.scrollWidth + 'px';
    }

    window.addEventListener('load', syncWidth);
    window.addEventListener('resize', syncWidth);
  </script>
</body>
</html>
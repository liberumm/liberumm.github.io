<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>店舗管理システム</title>
  <!-- React and ReactDOM -->
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js" crossorigin="anonymous"></script>
  <!-- MUI (Material-UI) v5 -->
  <script src="https://cdn.jsdelivr.net/npm/@mui/material@5.11.15/umd/material-ui.production.min.js" crossorigin="anonymous"></script>
  <!-- Babel for JSX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.0/babel.min.js" crossorigin="anonymous"></script>
  <!-- Emotion ライブラリ -->
  <script src="https://cdn.jsdelivr.net/npm/@emotion/react@11.11.0/dist/emotion-react.umd.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emotion/styled@11.11.0/dist/emotion-styled.umd.min.js" crossorigin="anonymous"></script>
  <!-- Material-UIのスタイルシート -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #f5f5f5;
    }
    #root {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .content {
      flex: 1;
      padding: 20px;
    }
    .footer {
      padding: 10px;
      text-align: center;
      background-color: #1976d2;
      color: white;
    }
    .section-title {
      margin-top: 40px;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 4px 8px; /* パディングを減らしてコンパクトに */
      font-size: 0.875rem; /* フォントサイズを小さく */
    }
    th {
      background-color: #1976d2;
      color: white;
      text-align: left;
      font-size: 0.875rem;
    }
    .action-buttons {
      display: flex;
      gap: 8px;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { 
      AppBar, Toolbar, Typography, Table, TableBody, TableCell, TableContainer,
      TableHead, TableRow, Paper, TextField, Select, MenuItem: MenuItemMUI,
      InputLabel, FormControl, Button, IconButton, Dialog, DialogActions, DialogContent,
      DialogTitle, Switch, FormControlLabel, Snackbar, Alert,
      Box, Grid, Checkbox, TablePagination, Menu, Tooltip, Tabs, Tab
    } = MaterialUI;

    const { useState } = React;

    // 全てのセクションを表示するコンポーネント
    function AllSections({ filters }) {
      return (
        <div>
          <StoreOverview filters={filters} />
          <StoreEquipment filters={filters} />
          <Contacts filters={filters} />
          <ContractDetails filters={filters} />
          <Tenants filters={filters} />
          <NeighborhoodInfo filters={filters} />
          <RenovationHistory filters={filters} />
          <Issues filters={filters} /> {/* Issuesコンポーネントの追加 */}
          <GeneralHistory filters={filters} />
        </div>
      );
    }

    // 店舗概要コンポーネント
    function StoreOverview({ filters }) {
      const [data, setData] = useState({
        openDate: '2020-01',
        renovationDate: '2022-06',
        submissionDate: '2023-04-15',
        businessHours: '9:00 ～ 23:00',
        parkingRequired: 10,
        parkingSubmitted: 8,
        bicycleParkingRequired: 5,
        bicycleParkingSubmitted: 3,
        deliveryAvailableTime: '6:00 ～ 21:00',
        zoningArea: ['第一種中高層住居専用地域', '準立地法'],
        zoningApproved: [true, false],
        floorInfo: {
          aboveGround: 6,
          underground: 1,
          occupiedFloors: '1～2',
          ceilingHeight: '3m'
        },
        parkingDetails: {
          onSite: {
            total: 20,
            handicap: 2,
            paid: false,
            paymentMachine: true,
            partnerParking: 'タイムズ24',
            partnerParkingCount: 15,
            motorcycleCount: 5,
            management: '自社',
            usageConditions: '1,000円で2時間無料',
            excessFee: '30分200円'
          },
          offSite: {
            total: 30,
            handicap: 3,
            paid: true,
            paymentMachine: true,
            partnerParking: 'ナビパーク',
            partnerParkingCount: 20,
            motorcycleCount: 10,
            management: '自社',
            usageConditions: '1,000円で3時間無料',
            excessFee: '30分201円'
          }
        },
        // 他のフィールドもここに追加
      });

      const [open, setOpen] = useState(false);
      const [editData, setEditData] = useState(data);

      const handleOpen = () => setOpen(true);
      const handleClose = () => {
        setEditData(data);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value, type, checked } = e.target;
        if (name.startsWith('zoningApproved')) {
          const index = parseInt(name.split('_')[1]);
          const updatedApproved = [...editData.zoningApproved];
          updatedApproved[index] = checked;
          setEditData({
            ...editData,
            zoningApproved: updatedApproved
          });
        } else if (name.startsWith('zoningArea')) {
          const index = parseInt(name.split('_')[1]);
          const updatedAreas = [...editData.zoningArea];
          updatedAreas[index] = value;
          setEditData({
            ...editData,
            zoningArea: updatedAreas
          });
        } else if (name.startsWith('parkingDetails')) {
          const [_, detailType, field] = name.split('_');
          setEditData({
            ...editData,
            parkingDetails: {
              ...editData.parkingDetails,
              [detailType]: {
                ...editData.parkingDetails[detailType],
                [field]: type === 'checkbox' ? checked : value
              }
            }
          });
        } else if (name.startsWith('floorInfo')) {
          const field = name.split('_')[1];
          setEditData({
            ...editData,
            floorInfo: {
              ...editData.floorInfo,
              [field]: value
            }
          });
        } else {
          setEditData({
            ...editData,
            [name]: type === 'checkbox' ? checked : value
          });
        }
      };

      const handleSave = () => {
        setData(editData);
        setOpen(false);
      };

      // フィルター適用
      const filteredZoningArea = data.zoningArea.filter((area, index) => {
        const matchesSearch = filters.search === '' || area.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>項目</TableCell>
                <TableCell>内容</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              <TableRow>
                <TableCell>開店年月</TableCell>
                <TableCell>{data.openDate}</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>改装年月</TableCell>
                <TableCell>{data.renovationDate}</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>提出日</TableCell>
                <TableCell>{data.submissionDate}</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>営業時間</TableCell>
                <TableCell>{data.businessHours}</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>駐車場必要台数</TableCell>
                <TableCell>{data.parkingRequired} 台</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>駐車場届出台数</TableCell>
                <TableCell>{data.parkingSubmitted} 台</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>駐輪場必要台数</TableCell>
                <TableCell>{data.bicycleParkingRequired} 台</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>駐輪場届出台数</TableCell>
                <TableCell>{data.bicycleParkingSubmitted} 台</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>納品可能時間</TableCell>
                <TableCell>{data.deliveryAvailableTime}</TableCell>
              </TableRow>
              <TableRow>
                <TableCell>用途地域</TableCell>
                <TableCell>
                  {filteredZoningArea.map((area, index) => (
                    <div key={index}>
                      <TextField
                        name={`zoningArea_${index}`}
                        value={editData.zoningArea[index]}
                        onChange={handleChange}
                        size="small"
                        style={{ marginRight: 8 }}
                      />
                      <FormControlLabel
                        control={
                          <Checkbox
                            checked={editData.zoningApproved[index]}
                            onChange={handleChange}
                            name={`zoningApproved_${index}`}
                            color="primary"
                          />
                        }
                        label="〇/×"
                      />
                    </div>
                  ))}
                </TableCell>
              </TableRow>
              <TableRow>
                <TableCell>階数</TableCell>
                <TableCell>
                  地上: {data.floorInfo.aboveGround} 階,<br />
                  地下: {data.floorInfo.underground} 階,<br />
                  入居階: {data.floorInfo.occupiedFloors},<br />
                  天井高: {data.floorInfo.ceilingHeight}
                </TableCell>
              </TableRow>
              <TableRow>
                <TableCell>駐車場（敷地内）</TableCell>
                <TableCell>
                  台数: {data.parkingDetails.onSite.total} 台<br />
                  身障者用台数: {data.parkingDetails.onSite.handicap} 台<br />
                  有料／無料: {data.parkingDetails.onSite.paid ? '有料' : '無料'}<br />
                  精算機: {data.parkingDetails.onSite.paymentMachine ? 'あり' : 'なし'}<br />
                  提携駐車場: {data.parkingDetails.onSite.partnerParking} ({data.parkingDetails.onSite.partnerParkingCount} 台)<br />
                  バイク台数: {data.parkingDetails.onSite.motorcycleCount} 台<br />
                  管理: {data.parkingDetails.onSite.management}<br />
                  利用条件: {data.parkingDetails.onSite.usageConditions}<br />
                  超過料金: {data.parkingDetails.onSite.excessFee}
                </TableCell>
              </TableRow>
              <TableRow>
                <TableCell>駐車場（敷地外）</TableCell>
                <TableCell>
                  台数: {data.parkingDetails.offSite.total} 台<br />
                  身障者用台数: {data.parkingDetails.offSite.handicap} 台<br />
                  有料／無料: {data.parkingDetails.offSite.paid ? '有料' : '無料'}<br />
                  精算機: {data.parkingDetails.offSite.paymentMachine ? 'あり' : 'なし'}<br />
                  提携駐車場: {data.parkingDetails.offSite.partnerParking} ({data.parkingDetails.offSite.partnerParkingCount} 台)<br />
                  バイク台数: {data.parkingDetails.offSite.motorcycleCount} 台<br />
                  管理: {data.parkingDetails.offSite.management}<br />
                  利用条件: {data.parkingDetails.offSite.usageConditions}<br />
                  超過料金: {data.parkingDetails.offSite.excessFee}
                </TableCell>
              </TableRow>
              {/* 必要に応じて他のフィールドも追加 */}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={handleOpen} style={{ margin: 16 }}>
            編集
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="md" fullWidth>
            <DialogTitle>店舗概要編集</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="開店年月"
                    name="openDate"
                    type="month"
                    value={editData.openDate}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="改装年月"
                    name="renovationDate"
                    type="month"
                    value={editData.renovationDate}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="提出日"
                    name="submissionDate"
                    type="date"
                    value={editData.submissionDate}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="営業時間"
                    name="businessHours"
                    value={editData.businessHours}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="駐車場必要台数"
                    name="parkingRequired"
                    type="number"
                    value={editData.parkingRequired}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="駐車場届出台数"
                    name="parkingSubmitted"
                    type="number"
                    value={editData.parkingSubmitted}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="駐輪場必要台数"
                    name="bicycleParkingRequired"
                    type="number"
                    value={editData.bicycleParkingRequired}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="駐輪場届出台数"
                    name="bicycleParkingSubmitted"
                    type="number"
                    value={editData.bicycleParkingSubmitted}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="納品可能時間"
                    name="deliveryAvailableTime"
                    type="text"
                    value={editData.deliveryAvailableTime}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                {/* 用途地域の編集フィールド */}
                {editData.zoningArea.map((area, index) => (
                  <React.Fragment key={index}>
                    <Grid item xs={12} sm={6}>
                      <TextField
                        label={`用途地域 ${index + 1}`}
                        name={`zoningArea_${index}`}
                        value={editData.zoningArea[index]}
                        onChange={handleChange}
                        fullWidth
                        size="small"
                      />
                    </Grid>
                    <Grid item xs={12} sm={6}>
                      <FormControlLabel
                        control={
                          <Checkbox
                            checked={editData.zoningApproved[index]}
                            onChange={handleChange}
                            name={`zoningApproved_${index}`}
                            color="primary"
                          />
                        }
                        label="〇/×"
                      />
                    </Grid>
                  </React.Fragment>
                ))}
                {/* 駐車場（敷地内）の編集フィールド */}
                <Grid item xs={12}>
                  <Typography variant="subtitle1">駐車場（敷地内）</Typography>
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="台数"
                    name="parkingDetails_onSite_total"
                    type="number"
                    value={editData.parkingDetails.onSite.total}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="身障者用台数"
                    name="parkingDetails_onSite_handicap"
                    type="number"
                    value={editData.parkingDetails.onSite.handicap}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <FormControlLabel
                    control={
                      <Switch
                        checked={editData.parkingDetails.onSite.paid}
                        onChange={handleChange}
                        name="parkingDetails_onSite_paid"
                        color="primary"
                      />
                    }
                    label="有料／無料"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <FormControlLabel
                    control={
                      <Switch
                        checked={editData.parkingDetails.onSite.paymentMachine}
                        onChange={handleChange}
                        name="parkingDetails_onSite_paymentMachine"
                        color="primary"
                      />
                    }
                    label="精算機"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="提携駐車場名"
                    name="parkingDetails_onSite_partnerParking"
                    value={editData.parkingDetails.onSite.partnerParking}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="提携駐車場台数"
                    name="parkingDetails_onSite_partnerParkingCount"
                    type="number"
                    value={editData.parkingDetails.onSite.partnerParkingCount}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="バイク台数"
                    name="parkingDetails_onSite_motorcycleCount"
                    type="number"
                    value={editData.parkingDetails.onSite.motorcycleCount}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="管理"
                    name="parkingDetails_onSite_management"
                    type="text"
                    value={editData.parkingDetails.onSite.management}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="利用条件"
                    name="parkingDetails_onSite_usageConditions"
                    type="text"
                    value={editData.parkingDetails.onSite.usageConditions}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="超過料金"
                    name="parkingDetails_onSite_excessFee"
                    type="text"
                    value={editData.parkingDetails.onSite.excessFee}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                {/* 駐車場（敷地外）の編集フィールド */}
                <Grid item xs={12}>
                  <Typography variant="subtitle1">駐車場（敷地外）</Typography>
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="台数"
                    name="parkingDetails_offSite_total"
                    type="number"
                    value={editData.parkingDetails.offSite.total}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="身障者用台数"
                    name="parkingDetails_offSite_handicap"
                    type="number"
                    value={editData.parkingDetails.offSite.handicap}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <FormControlLabel
                    control={
                      <Switch
                        checked={editData.parkingDetails.offSite.paid}
                        onChange={handleChange}
                        name="parkingDetails_offSite_paid"
                        color="primary"
                      />
                    }
                    label="有料／無料"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <FormControlLabel
                    control={
                      <Switch
                        checked={editData.parkingDetails.offSite.paymentMachine}
                        onChange={handleChange}
                        name="parkingDetails_offSite_paymentMachine"
                        color="primary"
                      />
                    }
                    label="精算機"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="提携駐車場名"
                    name="parkingDetails_offSite_partnerParking"
                    value={editData.parkingDetails.offSite.partnerParking}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="提携駐車場台数"
                    name="parkingDetails_offSite_partnerParkingCount"
                    type="number"
                    value={editData.parkingDetails.offSite.partnerParkingCount}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={3}>
                  <TextField
                    label="バイク台数"
                    name="parkingDetails_offSite_motorcycleCount"
                    type="number"
                    value={editData.parkingDetails.offSite.motorcycleCount}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="管理"
                    name="parkingDetails_offSite_management"
                    type="text"
                    value={editData.parkingDetails.offSite.management}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="利用条件"
                    name="parkingDetails_offSite_usageConditions"
                    type="text"
                    value={editData.parkingDetails.offSite.usageConditions}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="超過料金"
                    name="parkingDetails_offSite_excessFee"
                    type="text"
                    value={editData.parkingDetails.offSite.excessFee}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 店舗設備コンポーネント
    function StoreEquipment({ filters }) {
      const [equipment, setEquipment] = useState([
        { id: 1, category: '売場設備', name: 'サミカフェ・私の喫茶室', seats: '〇', available: '〇' },
        { id: 2, category: '売場設備', name: '給茶機', seats: '〇', available: '〇' },
        { id: 3, category: '売場設備', name: 'コーヒー', seats: '〇', available: '〇' },
        // 他の設備もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentEquipment, setCurrentEquipment] = useState(null);

      const handleOpen = (equipmentItem = null) => {
        setCurrentEquipment(equipmentItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentEquipment(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentEquipment({
          ...currentEquipment,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentEquipment.id) {
          // 更新
          setEquipment(equipment.map(eq => eq.id === currentEquipment.id ? currentEquipment : eq));
        } else {
          // 追加
          const newId = equipment.length > 0 ? Math.max(...equipment.map(eq => eq.id)) + 1 : 1;
          setEquipment([...equipment, { ...currentEquipment, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setEquipment(equipment.filter(eq => eq.id !== id));
        }
      };

      // フィルター適用
      const filteredEquipment = equipment.filter(eq => {
        const matchesCategory = filters.equipmentCategory === 'all' || eq.category === filters.equipmentCategory;
        const matchesSearch = filters.search === '' || eq.name.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesCategory && matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>カテゴリ</TableCell>
                <TableCell>設備名</TableCell>
                <TableCell>備考1</TableCell>
                <TableCell>備考2</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredEquipment.map((item) => (
                <TableRow key={item.id}>
                  <TableCell>{item.category}</TableCell>
                  <TableCell>{item.name}</TableCell>
                  <TableCell>{item.seats}</TableCell>
                  <TableCell>{item.available}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(item)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(item.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredEquipment.length === 0 && (
                <TableRow>
                  <TableCell colSpan={5} align="center">該当する設備がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            設備追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentEquipment && currentEquipment.id ? '設備編集' : '設備追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12}>
                  <TextField
                    label="カテゴリ"
                    name="category"
                    value={currentEquipment ? currentEquipment.category : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12}>
                  <TextField
                    label="設備名"
                    name="name"
                    value={currentEquipment ? currentEquipment.name : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={6}>
                  <TextField
                    label="備考1"
                    name="seats"
                    value={currentEquipment ? currentEquipment.seats : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={6}>
                  <TextField
                    label="備考2"
                    name="available"
                    value={currentEquipment ? currentEquipment.available : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 担当・取引先コンポーネント
    function Contacts({ filters }) {
      const [contacts, setContacts] = useState([
        { id: 1, department: '店舗開発部', name: '山田 太郎', company: '設計事務所A', role: '担当者名A', contactPerson: '内装担当A' },
        { id: 2, department: '現場担当', name: '佐藤 花子', company: '施工会社B', role: '担当者名B', contactPerson: '施工担当B' },
        // 他の連絡先もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentContact, setCurrentContact] = useState(null);

      const handleOpen = (contactItem = null) => {
        setCurrentContact(contactItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentContact(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentContact({
          ...currentContact,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentContact.id) {
          // 更新
          setContacts(contacts.map(ct => ct.id === currentContact.id ? currentContact : ct));
        } else {
          // 追加
          const newId = contacts.length > 0 ? Math.max(...contacts.map(ct => ct.id)) + 1 : 1;
          setContacts([...contacts, { ...currentContact, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setContacts(contacts.filter(ct => ct.id !== id));
        }
      };

      // フィルター適用
      const filteredContacts = contacts.filter(ct => {
        const matchesSearch = filters.search === '' || ct.department.includes(filters.search) || ct.name.includes(filters.search) || ct.company.includes(filters.search);
        const matchesLocation = filters.location === 'all' || ct.department === filters.location; // 仮のロジック
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch && matchesLocation;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>部署</TableCell>
                <TableCell>担当者名</TableCell>
                <TableCell>会社</TableCell>
                <TableCell>役割</TableCell>
                <TableCell>連絡先</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredContacts.map((contact) => (
                <TableRow key={contact.id}>
                  <TableCell>{contact.department}</TableCell>
                  <TableCell>{contact.name}</TableCell>
                  <TableCell>{contact.company}</TableCell>
                  <TableCell>{contact.role}</TableCell>
                  <TableCell>{contact.contactPerson}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(contact)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(contact.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredContacts.length === 0 && (
                <TableRow>
                  <TableCell colSpan={6} align="center">該当する連絡先がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            連絡先追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentContact && currentContact.id ? '連絡先編集' : '連絡先追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="部署"
                    name="department"
                    value={currentContact ? currentContact.department : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="担当者名"
                    name="name"
                    value={currentContact ? currentContact.name : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="会社"
                    name="company"
                    value={currentContact ? currentContact.company : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="役割"
                    name="role"
                    value={currentContact ? currentContact.role : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12}>
                  <TextField
                    label="連絡先"
                    name="contactPerson"
                    value={currentContact ? currentContact.contactPerson : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 契約内容コンポーネント
    function ContractDetails({ filters }) {
      const [contracts, setContracts] = useState([
        {
          id: 1,
          contractType: '普通',
          startDate: '2023-01-01',
          endDate: '2024-12-31',
          rentTotal: '¥500,000',
          leasedAreaTotal: '100㎡',
          rentPerTsubo: '¥50,000',
          deposit: '¥1,000,000',
          guaranty: '¥1,000,000',
          renewalConditions: '条件A',
        },
        // 他の契約もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentContract, setCurrentContract] = useState(null);

      const handleOpen = (contractItem = null) => {
        setCurrentContract(contractItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentContract(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentContract({
          ...currentContract,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentContract.id) {
          // 更新
          setContracts(contracts.map(ct => ct.id === currentContract.id ? currentContract : ct));
        } else {
          // 追加
          const newId = contracts.length > 0 ? Math.max(...contracts.map(ct => ct.id)) + 1 : 1;
          setContracts([...contracts, { ...currentContract, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setContracts(contracts.filter(ct => ct.id !== id));
        }
      };

      // フィルター適用
      const filteredContracts = contracts.filter(ct => {
        const matchesType = filters.equipmentCategory === 'all' || ct.contractType === filters.equipmentCategory; // 仮のロジック
        const matchesSearch = filters.search === '' || ct.contractType.includes(filters.search) || ct.renewalConditions.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesType && matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>契約タイプ</TableCell>
                <TableCell>契約開始日</TableCell>
                <TableCell>契約終了日</TableCell>
                <TableCell>賃料合計</TableCell>
                <TableCell>賃借面積合計</TableCell>
                <TableCell>坪単価</TableCell>
                <TableCell>敷金</TableCell>
                <TableCell>保証金</TableCell>
                <TableCell>更新条件</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredContracts.map((contract) => (
                <TableRow key={contract.id}>
                  <TableCell>{contract.contractType}</TableCell>
                  <TableCell>{contract.startDate}</TableCell>
                  <TableCell>{contract.endDate}</TableCell>
                  <TableCell>{contract.rentTotal}</TableCell>
                  <TableCell>{contract.leasedAreaTotal}</TableCell>
                  <TableCell>{contract.rentPerTsubo}</TableCell>
                  <TableCell>{contract.deposit}</TableCell>
                  <TableCell>{contract.guaranty}</TableCell>
                  <TableCell>{contract.renewalConditions}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(contract)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(contract.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredContracts.length === 0 && (
                <TableRow>
                  <TableCell colSpan={10} align="center">該当する契約がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            契約追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentContract && currentContract.id ? '契約編集' : '契約追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={6}>
                  <FormControl fullWidth size="small">
                    <InputLabel>契約タイプ</InputLabel>
                    <Select
                      label="契約タイプ"
                      name="contractType"
                      value={currentContract ? currentContract.contractType : ''}
                      onChange={handleChange}
                    >
                      <MenuItemMUI value="普通">普通</MenuItemMUI>
                      <MenuItemMUI value="定借">定借</MenuItemMUI>
                      <MenuItemMUI value="事業用定期借地">事業用定期借地</MenuItemMUI>
                    </Select>
                  </FormControl>
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="契約開始日"
                    name="startDate"
                    type="date"
                    value={currentContract ? currentContract.startDate : ''}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="契約終了日"
                    name="endDate"
                    type="date"
                    value={currentContract ? currentContract.endDate : ''}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="賃料合計"
                    name="rentTotal"
                    type="text"
                    value={currentContract ? currentContract.rentTotal : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="賃借面積合計"
                    name="leasedAreaTotal"
                    type="text"
                    value={currentContract ? currentContract.leasedAreaTotal : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="坪単価"
                    name="rentPerTsubo"
                    type="text"
                    value={currentContract ? currentContract.rentPerTsubo : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="敷金"
                    name="deposit"
                    type="text"
                    value={currentContract ? currentContract.deposit : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="保証金"
                    name="guaranty"
                    type="text"
                    value={currentContract ? currentContract.guaranty : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="更新条件"
                    name="renewalConditions"
                    type="text"
                    value={currentContract ? currentContract.renewalConditions : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // テナントコンポーネント
    function Tenants({ filters }) {
      const [tenants, setTenants] = useState([
        {
          id: 1,
          name: '100円均一',
          industry: '雑貨',
          businessHours: '9:00 ～ 21:00',
          contractType: '普通',
          startDate: '2023-04-01',
          endDate: '2024-03-31',
          rent: '¥100,000',
          parkingFee: '¥10,000',
          commission: '〇',
          notes: '特記事項なし',
        },
        // 他のテナントもここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentTenant, setCurrentTenant] = useState(null);

      const handleOpen = (tenantItem = null) => {
        setCurrentTenant(tenantItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentTenant(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentTenant({
          ...currentTenant,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentTenant.id) {
          // 更新
          setTenants(tenants.map(tn => tn.id === currentTenant.id ? currentTenant : tn));
        } else {
          // 追加
          const newId = tenants.length > 0 ? Math.max(...tenants.map(tn => tn.id)) + 1 : 1;
          setTenants([...tenants, { ...currentTenant, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setTenants(tenants.filter(tn => tn.id !== id));
        }
      };

      // フィルター適用
      const filteredTenants = tenants.filter(tn => {
        const matchesSearch = filters.search === '' || tn.name.includes(filters.search) || tn.industry.includes(filters.search);
        const matchesLocation = filters.location === 'all' || tn.contractType === filters.location; // 仮のロジック
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch && matchesLocation;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>テナント名</TableCell>
                <TableCell>業種</TableCell>
                <TableCell>営業時間</TableCell>
                <TableCell>契約タイプ</TableCell>
                <TableCell>契約開始日</TableCell>
                <TableCell>契約終了日</TableCell>
                <TableCell>賃料</TableCell>
                <TableCell>駐車料</TableCell>
                <TableCell>事務手数料</TableCell>
                <TableCell>特記事項</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredTenants.map((tenant) => (
                <TableRow key={tenant.id}>
                  <TableCell>{tenant.name}</TableCell>
                  <TableCell>{tenant.industry}</TableCell>
                  <TableCell>{tenant.businessHours}</TableCell>
                  <TableCell>{tenant.contractType}</TableCell>
                  <TableCell>{tenant.startDate}</TableCell>
                  <TableCell>{tenant.endDate}</TableCell>
                  <TableCell>{tenant.rent}</TableCell>
                  <TableCell>{tenant.parkingFee}</TableCell>
                  <TableCell>{tenant.commission}</TableCell>
                  <TableCell>{tenant.notes}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(tenant)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(tenant.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredTenants.length === 0 && (
                <TableRow>
                  <TableCell colSpan={11} align="center">該当するテナントがありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            テナント追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentTenant && currentTenant.id ? 'テナント編集' : 'テナント追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="テナント名"
                    name="name"
                    value={currentTenant ? currentTenant.name : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="業種"
                    name="industry"
                    value={currentTenant ? currentTenant.industry : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="営業時間"
                    name="businessHours"
                    value={currentTenant ? currentTenant.businessHours : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <FormControl fullWidth size="small">
                    <InputLabel>契約タイプ</InputLabel>
                    <Select
                      label="契約タイプ"
                      name="contractType"
                      value={currentTenant ? currentTenant.contractType : ''}
                      onChange={handleChange}
                    >
                      <MenuItemMUI value="普通">普通</MenuItemMUI>
                      <MenuItemMUI value="定借">定借</MenuItemMUI>
                    </Select>
                  </FormControl>
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="契約開始日"
                    name="startDate"
                    type="date"
                    value={currentTenant ? currentTenant.startDate : ''}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="契約終了日"
                    name="endDate"
                    type="date"
                    value={currentTenant ? currentTenant.endDate : ''}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="賃料"
                    name="rent"
                    type="text"
                    value={currentTenant ? currentTenant.rent : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="駐車料"
                    name="parkingFee"
                    type="text"
                    value={currentTenant ? currentTenant.parkingFee : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <FormControlLabel
                    control={
                      <Checkbox
                        checked={currentTenant ? currentTenant.commission === '〇' : false}
                        onChange={(e) => setCurrentTenant({
                          ...currentTenant,
                          commission: e.target.checked ? '〇' : '✕'
                        })}
                        name="commission"
                        color="primary"
                      />
                    }
                    label="事務手数料"
                  />
                </Grid>
                <Grid item xs={12}>
                  <TextField
                    label="特記事項"
                    name="notes"
                    value={currentTenant ? currentTenant.notes : ''}
                    onChange={handleChange}
                    fullWidth
                    multiline
                    rows={2}
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 近隣情報コンポーネント（例）
    function NeighborhoodInfo({ filters }) {
      const [neighborhoods, setNeighborhoods] = useState([
        { id: 1, type: '近隣協定', details: '協定内容A' },
        { id: 2, type: '自治会', details: '自治会内容B' },
        { id: 3, type: '商工会', details: '商工会内容C' },
        // 他の近隣情報もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentNeighborhood, setCurrentNeighborhood] = useState(null);

      const handleOpen = (neighborhoodItem = null) => {
        setCurrentNeighborhood(neighborhoodItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentNeighborhood(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentNeighborhood({
          ...currentNeighborhood,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentNeighborhood.id) {
          // 更新
          setNeighborhoods(neighborhoods.map(nh => nh.id === currentNeighborhood.id ? currentNeighborhood : nh));
        } else {
          // 追加
          const newId = neighborhoods.length > 0 ? Math.max(...neighborhoods.map(nh => nh.id)) + 1 : 1;
          setNeighborhoods([...neighborhoods, { ...currentNeighborhood, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setNeighborhoods(neighborhoods.filter(nh => nh.id !== id));
        }
      };

      // フィルター適用
      const filteredNeighborhoods = neighborhoods.filter(nh => {
        const matchesSearch = filters.search === '' || nh.type.includes(filters.search) || nh.details.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>種類</TableCell>
                <TableCell>内容</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredNeighborhoods.map((nh) => (
                <TableRow key={nh.id}>
                  <TableCell>{nh.type}</TableCell>
                  <TableCell>{nh.details}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(nh)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(nh.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredNeighborhoods.length === 0 && (
                <TableRow>
                  <TableCell colSpan={3} align="center">該当する近隣情報がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            近隣情報追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentNeighborhood && currentNeighborhood.id ? '近隣情報編集' : '近隣情報追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="種類"
                    name="type"
                    value={currentNeighborhood ? currentNeighborhood.type : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={6}>
                  <TextField
                    label="内容"
                    name="details"
                    value={currentNeighborhood ? currentNeighborhood.details : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 改修履歴コンポーネント（例）
    function RenovationHistory({ filters }) {
      const [history, setHistory] = useState([
        {
          id: 1,
          date: '2023-05-10',
          content: '賃料改定',
          duration: '10日',
          contractor: '施工会社A',
          cost: '¥200,000',
          interiorCost: '',
          equipmentCost: '',
          otherOrders: '',
          additionalCost: '',
          totalCost: '¥200,000'
        },
        {
          id: 2,
          date: '2024-01-15',
          content: '契約更新',
          duration: '5日',
          contractor: '施工会社B',
          cost: '¥100,000',
          interiorCost: '',
          equipmentCost: '',
          otherOrders: '',
          additionalCost: '',
          totalCost: '¥100,000'
        },
        // 他の改修履歴もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentHistory, setCurrentHistory] = useState(null);

      const handleOpen = (historyItem = null) => {
        setCurrentHistory(historyItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentHistory(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentHistory({
          ...currentHistory,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentHistory.id) {
          // 更新
          setHistory(history.map(hh => hh.id === currentHistory.id ? currentHistory : hh));
        } else {
          // 追加
          const newId = history.length > 0 ? Math.max(...history.map(hh => hh.id)) + 1 : 1;
          setHistory([...history, { ...currentHistory, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setHistory(history.filter(hh => hh.id !== id));
        }
      };

      // フィルター適用
      const filteredHistory = history.filter(hh => {
        const matchesSearch = filters.search === '' || hh.content.includes(filters.search) || hh.contractor.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>日付</TableCell>
                <TableCell>内容</TableCell>
                <TableCell>工事日数</TableCell>
                <TableCell>施工業者</TableCell>
                <TableCell>建築費</TableCell>
                <TableCell>内装費</TableCell>
                <TableCell>設備費</TableCell>
                <TableCell>他部発注分</TableCell>
                <TableCell>追加工事費</TableCell>
                <TableCell>コスト計</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredHistory.map((item) => (
                <TableRow key={item.id}>
                  <TableCell>{item.date}</TableCell>
                  <TableCell>{item.content}</TableCell>
                  <TableCell>{item.duration}</TableCell>
                  <TableCell>{item.contractor}</TableCell>
                  <TableCell>{item.cost}</TableCell>
                  <TableCell>{item.interiorCost}</TableCell>
                  <TableCell>{item.equipmentCost}</TableCell>
                  <TableCell>{item.otherOrders}</TableCell>
                  <TableCell>{item.additionalCost}</TableCell>
                  <TableCell>{item.totalCost}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(item)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(item.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredHistory.length === 0 && (
                <TableRow>
                  <TableCell colSpan={11} align="center">該当する改修履歴がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            改修履歴追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="lg" fullWidth>
            <DialogTitle>{currentHistory && currentHistory.id ? '改修履歴編集' : '改修履歴追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="日付"
                    name="date"
                    type="date"
                    value={currentHistory ? currentHistory.date : ''}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="内容"
                    name="content"
                    type="text"
                    value={currentHistory ? currentHistory.content : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="工事日数"
                    name="duration"
                    type="text"
                    value={currentHistory ? currentHistory.duration : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="施工業者"
                    name="contractor"
                    type="text"
                    value={currentHistory ? currentHistory.contractor : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={2}>
                  <TextField
                    label="建築費"
                    name="cost"
                    type="text"
                    value={currentHistory ? currentHistory.cost : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={2}>
                  <TextField
                    label="内装費"
                    name="interiorCost"
                    type="text"
                    value={currentHistory ? currentHistory.interiorCost : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={2}>
                  <TextField
                    label="設備費"
                    name="equipmentCost"
                    type="text"
                    value={currentHistory ? currentHistory.equipmentCost : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={2}>
                  <TextField
                    label="他部発注分"
                    name="otherOrders"
                    type="text"
                    value={currentHistory ? currentHistory.otherOrders : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={2}>
                  <TextField
                    label="追加工事費"
                    name="additionalCost"
                    type="text"
                    value={currentHistory ? currentHistory.additionalCost : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="コスト計"
                    name="totalCost"
                    type="text"
                    value={currentHistory ? currentHistory.totalCost : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 全般履歴コンポーネント（例）
    function GeneralHistory({ filters }) {
      const [generalHistory, setGeneralHistory] = useState([
        {
          id: 1,
          date: '2023-03-10',
          meeting: '全体会議',
          personInCharge: '佐藤 花子',
          content: '新店舗開店に伴う準備状況報告'
        },
        // 他の履歴もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentHistory, setCurrentHistory] = useState(null);

      const handleOpen = (historyItem = null) => {
        setCurrentHistory(historyItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentHistory(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentHistory({
          ...currentHistory,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentHistory.id) {
          // 更新
          setGeneralHistory(generalHistory.map(gh => gh.id === currentHistory.id ? currentHistory : gh));
        } else {
          // 追加
          const newId = generalHistory.length > 0 ? Math.max(...generalHistory.map(gh => gh.id)) + 1 : 1;
          setGeneralHistory([...generalHistory, { ...currentHistory, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setGeneralHistory(generalHistory.filter(gh => gh.id !== id));
        }
      };

      // フィルター適用
      const filteredGeneralHistory = generalHistory.filter(gh => {
        const matchesSearch = filters.search === '' || gh.meeting.includes(filters.search) || gh.content.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>日付</TableCell>
                <TableCell>会議</TableCell>
                <TableCell>担当</TableCell>
                <TableCell>内容</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredGeneralHistory.map((gh) => (
                <TableRow key={gh.id}>
                  <TableCell>{gh.date}</TableCell>
                  <TableCell>{gh.meeting}</TableCell>
                  <TableCell>{gh.personInCharge}</TableCell>
                  <TableCell>{gh.content}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(gh)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(gh.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredGeneralHistory.length === 0 && (
                <TableRow>
                  <TableCell colSpan={5} align="center">該当する全般履歴がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            全般履歴追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentHistory && currentHistory.id ? '全般履歴編集' : '全般履歴追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="日付"
                    name="date"
                    type="date"
                    value={currentHistory ? currentHistory.date : ''}
                    onChange={handleChange}
                    InputLabelProps={{ shrink: true }}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="会議"
                    name="meeting"
                    type="text"
                    value={currentHistory ? currentHistory.meeting : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12} sm={4}>
                  <TextField
                    label="担当"
                    name="personInCharge"
                    type="text"
                    value={currentHistory ? currentHistory.personInCharge : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12}>
                  <TextField
                    label="内容"
                    name="content"
                    type="text"
                    value={currentHistory ? currentHistory.content : ''}
                    onChange={handleChange}
                    fullWidth
                    multiline
                    rows={2}
                    size="small"
                  />
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // Issuesコンポーネントの定義
    function Issues({ filters }) {
      const [issues, setIssues] = useState([
        { id: 1, title: '設備故障', description: '給茶機が故障しました。修理が必要です。', status: '未解決' },
        { id: 2, title: '清掃不足', description: '店舗内の清掃が不十分です。改善をお願いします。', status: '解決済み' },
        // 他の課題もここに追加
      ]);

      const [open, setOpen] = useState(false);
      const [currentIssue, setCurrentIssue] = useState(null);

      const handleOpen = (issueItem = null) => {
        setCurrentIssue(issueItem);
        setOpen(true);
      };

      const handleClose = () => {
        setCurrentIssue(null);
        setOpen(false);
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setCurrentIssue({
          ...currentIssue,
          [name]: value
        });
      };

      const handleSave = () => {
        if (currentIssue.id) {
          // 更新
          setIssues(issues.map(iss => iss.id === currentIssue.id ? currentIssue : iss));
        } else {
          // 追加
          const newId = issues.length > 0 ? Math.max(...issues.map(iss => iss.id)) + 1 : 1;
          setIssues([...issues, { ...currentIssue, id: newId }]);
        }
        handleClose();
      };

      const handleDelete = (id) => {
        if (window.confirm('本当に削除しますか？')) {
          setIssues(issues.filter(iss => iss.id !== id));
        }
      };

      // フィルター適用
      const filteredIssues = issues.filter(iss => {
        const matchesSearch = filters.search === '' || iss.title.includes(filters.search) || iss.description.includes(filters.search);
        // 他のフィルター条件を追加する場合はここに記述
        return matchesSearch;
      });

      return (
        <TableContainer component={Paper} style={{ marginBottom: 20 }}>
          <Table size="small">
            <TableHead>
              <TableRow>
                <TableCell>タイトル</TableCell>
                <TableCell>説明</TableCell>
                <TableCell>ステータス</TableCell>
                <TableCell>操作</TableCell>
              </TableRow>
            </TableHead>
            <TableBody>
              {filteredIssues.map((issue) => (
                <TableRow key={issue.id}>
                  <TableCell>{issue.title}</TableCell>
                  <TableCell>{issue.description}</TableCell>
                  <TableCell>{issue.status}</TableCell>
                  <TableCell className="action-buttons">
                    <Button size="small" onClick={() => handleOpen(issue)}>編集</Button>
                    <Button size="small" color="secondary" onClick={() => handleDelete(issue.id)}>削除</Button>
                  </TableCell>
                </TableRow>
              ))}
              {filteredIssues.length === 0 && (
                <TableRow>
                  <TableCell colSpan={4} align="center">該当する課題がありません。</TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
          <Button variant="contained" color="primary" onClick={() => handleOpen()} style={{ margin: 16 }}>
            課題追加
          </Button>

          <Dialog open={open} onClose={handleClose} maxWidth="sm" fullWidth>
            <DialogTitle>{currentIssue && currentIssue.id ? '課題編集' : '課題追加'}</DialogTitle>
            <DialogContent>
              <Grid container spacing={2}>
                <Grid item xs={12}>
                  <TextField
                    label="タイトル"
                    name="title"
                    value={currentIssue ? currentIssue.title : ''}
                    onChange={handleChange}
                    fullWidth
                    size="small"
                  />
                </Grid>
                <Grid item xs={12}>
                  <TextField
                    label="説明"
                    name="description"
                    value={currentIssue ? currentIssue.description : ''}
                    onChange={handleChange}
                    fullWidth
                    multiline
                    rows={3}
                    size="small"
                  />
                </Grid>
                <Grid item xs={12}>
                  <FormControl fullWidth size="small">
                    <InputLabel>ステータス</InputLabel>
                    <Select
                      label="ステータス"
                      name="status"
                      value={currentIssue ? currentIssue.status : ''}
                      onChange={handleChange}
                    >
                      <MenuItemMUI value="未解決">未解決</MenuItemMUI>
                      <MenuItemMUI value="解決済み">解決済み</MenuItemMUI>
                    </Select>
                  </FormControl>
                </Grid>
              </Grid>
            </DialogContent>
            <DialogActions>
              <Button onClick={handleClose} color="secondary">キャンセル</Button>
              <Button onClick={handleSave} color="primary" variant="contained">保存</Button>
            </DialogActions>
          </Dialog>
        </TableContainer>
      );
    }

    // 他のセクションコンポーネントも同様に定義...

    // メインAppコンポーネント
    function AppMain() {
      // フィルターの状態管理
      const [filters, setFilters] = useState({
        year: '2024',
        month: '01',
        location: 'all', // 「全て」をデフォルトに
        equipmentCategory: 'all',
        search: ''
      });

      // タブの状態管理
      const [tabValue, setTabValue] = useState(0);

      const handleFilterChange = (e) => {
        const { name, value } = e.target;
        setFilters({
          ...filters,
          [name]: value
        });
      };

      const handleTabChange = (event, newValue) => {
        setTabValue(newValue);
      };

      return (
        <Box display="flex" flexDirection="column" minHeight="100vh">
          {/* ヘッダー */}
          <AppBar position="static">
            <Toolbar>
              <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
                店舗管理システム
              </Typography>
            </Toolbar>
          </AppBar>

          {/* メインコンテンツ */}
          <Box className="content">
            {/* フィルターセクション */}
            <Paper style={{ padding: 20, marginBottom: 20 }}>
              <Grid container spacing={2}>
                {/* 年度フィルター */}
                <Grid item xs={12} sm={6} md={2}>
                  <FormControl variant="outlined" size="small" fullWidth>
                    <InputLabel>年度</InputLabel>
                    <Select 
                      name="year" 
                      value={filters.year} 
                      label="年度"
                      onChange={handleFilterChange}
                    >
                      {/* 年度の選択肢を動的に生成 */}
                      {Array.from(new Array(5), (val, index) => (
                        <MenuItemMUI key={2020 + index} value={2020 + index}>
                          {2020 + index}年
                        </MenuItemMUI>
                      ))}
                    </Select>
                  </FormControl>
                </Grid>

                {/* 月度フィルター */}
                <Grid item xs={12} sm={6} md={2}>
                  <FormControl variant="outlined" size="small" fullWidth>
                    <InputLabel>月度</InputLabel>
                    <Select 
                      name="month" 
                      value={filters.month} 
                      label="月度"
                      onChange={handleFilterChange}
                    >
                      {/* 月度の選択肢 */}
                      {Array.from(new Array(12), (val, index) => {
                        const month = String(index + 1).padStart(2, '0');
                        return (
                          <MenuItemMUI key={month} value={month}>
                            {month}月
                          </MenuItemMUI>
                        );
                      })}
                    </Select>
                  </FormControl>
                </Grid>

                {/* 拠点フィルター */}
                <Grid item xs={12} sm={6} md={2}>
                  <FormControl variant="outlined" size="small" fullWidth>
                    <InputLabel>拠点フィルター</InputLabel>
                    <Select 
                      name="location" 
                      value={filters.location} 
                      label="拠点フィルター"
                      onChange={handleFilterChange}
                    >
                      {/* 拠点の選択肢 */}
                      <MenuItemMUI value="all">全て</MenuItemMUI>
                      <MenuItemMUI value="103">拠点103</MenuItemMUI>
                      <MenuItemMUI value="104">拠点104</MenuItemMUI>
                      <MenuItemMUI value="105">拠点105</MenuItemMUI>
                      {/* 必要に応じて追加 */}
                    </Select>
                  </FormControl>
                </Grid>

                {/* 設備カテゴリー */}
                <Grid item xs={12} sm={6} md={2}>
                  <FormControl variant="outlined" size="small" fullWidth>
                    <InputLabel>設備カテゴリー</InputLabel>
                    <Select 
                      name="equipmentCategory" 
                      value={filters.equipmentCategory} 
                      label="設備カテゴリー"
                      onChange={handleFilterChange}
                    >
                      {/* 設備カテゴリーの選択肢 */}
                      <MenuItemMUI value="all">全て</MenuItemMUI>
                      <MenuItemMUI value="売場設備">売場設備</MenuItemMUI>
                      <MenuItemMUI value="給茶機">給茶機</MenuItemMUI>
                      {/* 必要に応じて追加 */}
                    </Select>
                  </FormControl>
                </Grid>

                {/* 検索 */}
                <Grid item xs={12} sm={12} md={4}>
                  <TextField
                    label="検索"
                    variant="outlined"
                    size="small"
                    fullWidth
                    name="search"
                    value={filters.search}
                    onChange={handleFilterChange}
                  />
                </Grid>

                {/* フィルターリセットボタン */}
                <Grid item xs={12} sm={12} md={2}>
                  <Button
                    variant="outlined"
                    color="secondary"
                    fullWidth
                    onClick={() => setFilters({
                      year: '2024',
                      month: '01',
                      location: 'all',
                      equipmentCategory: 'all',
                      search: ''
                    })}
                  >
                    リセット
                  </Button>
                </Grid>
              </Grid>
            </Paper>

            {/* タブナビゲーション */}
            <Paper>
              <Tabs
                value={tabValue}
                onChange={handleTabChange}
                indicatorColor="primary"
                textColor="primary"
                variant="scrollable"
                scrollButtons="auto"
              >
                <Tab label="全て" />
                <Tab label="店舗概要" />
                <Tab label="店舗設備" />
                <Tab label="担当・取引先" />
                <Tab label="契約内容" />
                <Tab label="テナント" />
                <Tab label="近隣情報" />
                <Tab label="改修履歴" />
                <Tab label="課題" />
                <Tab label="全般履歴" />
              </Tabs>
              <Box p={3}>
                {tabValue === 0 && <AllSections filters={filters} />}
                {tabValue === 1 && <StoreOverview filters={filters} />}
                {tabValue === 2 && <StoreEquipment filters={filters} />}
                {tabValue === 3 && <Contacts filters={filters} />}
                {tabValue === 4 && <ContractDetails filters={filters} />}
                {tabValue === 5 && <Tenants filters={filters} />}
                {tabValue === 6 && <NeighborhoodInfo filters={filters} />}
                {tabValue === 7 && <RenovationHistory filters={filters} />}
                {tabValue === 8 && <Issues filters={filters} />} {/* Issuesタブの対応 */}
                {tabValue === 9 && <GeneralHistory filters={filters} />}
              </Box>
            </Paper>
          </Box>

          {/* フッター */}
          <Box className="footer">
            <Typography variant="body2">
              © 2024 店舗管理システム. All rights reserved.
            </Typography>
          </Box>
        </Box>
      );
    }

    // 他のセクションコンポーネントも同様に定義...

    // メインAppコンポーネントをレンダリング
    ReactDOM.render(<AppMain />, document.getElementById('root'));
  </script>
</body>
</html>
